<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>mp-blog</title>
  </head>
  <body>
    <div id="app"></div>
    
  </body>
  <div>
    <button id="send"">child send</button>

  </div>

  <script type="module">

    import Client from '../dist/frame-subscriber.esm.bundle.js'
    
    setTimeout(() => {
      var c = new Client({
        unique: 'child'
      })

c
// .on('message', function(e){
//         console.log('child got message: ' ,e)
//     })
    .on('test', function(e){
        console.log('child got test: ' ,e)
    })

console.log('-child---__MP__', window.__MP__)
// window.addEventListener('message', function(e){
//     console.log('child raw  got message: ' , e)
// });

function send(){
    console.log('parent node',window.parent, window.parent === window)
//   c.send('haha')
  c.emit('test', {a: 'i m child'}, {namespace: 'bb'})
// window.postMessage('hehe')
  
}
document.dgg = 's'
document.querySelector('#send').onclick = send
    }, 5000);
   
        </script>
</html>
